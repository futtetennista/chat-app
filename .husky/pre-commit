pnpm exec lint-staged

changed_packages=$(git diff --cached --name-only | grep -E '\.tsx?$' | cut -d'/' -f2 | sort -u)
echo "Changed packages: ${changed_packages[*]}"
for package in $changed_packages; do
  if [ -d "packages/$package" ]; then
    echo "Running tests for package: $package"
    pnpm --filter "$package" run test:unit
  else
    echo "No staged files for package '$package' have .{ts,tsx} suffix."
  fi
done
